                ->schema([                    Fieldset::make('goal')                        ->label("Objectifs de réductions d'émissions")                        ->disabled($this->project->hasFormFieldsDisabled())                        ->schema([                            Toggle::make('project.is_goal_tco2_edited_manually')                                ->label('Objectifs de CO2 édités manuellement')                                ->visible($this->project->hasChildrenProjects())                                ->columnSpanFull()                                ->afterStateUpdated(function (Set $set, Get $get, $state) {                                    $goalTco2 = match ($this->project->hasChildrenProjects()) {                                        true => match ($state) {                                            true => $this->project->tco2,                                            false => $this->project->childrenProjects->sum('tco2')                                        },                                        false => $this->project->tco2                                    };                                    $set('goal_tco2', $goalTco2);                                })                                ->helperText("Si l'objectif est géré manuellement, vous devez vous-même mettre à jour si vous ajoutez des sous-projets. Dans le cas contraire, cela est calculé automatiquement.")                                ->reactive(),                            TextInput::make('goal_tco2')                                ->label('Objectif en tonne de CO2')                                ->reactive()                                ->hint(function (Get $get) {                                    if ($this->project->hasChildrenProjects() and ! $get('project.is_goal_tco2_edited_manually')) {                                        return new HtmlString("<span class='text-yellow-500'>Calculé automatiquement</span>");                                    }                                    return null;                                })                                ->readOnly(fn (Get $get): bool => $this->project->hasChildrenProjects() and ! $get('project.is_goal_tco2_edited_manually'))                                ->required(fn (Get $get): bool => ($this->project->hasChildrenProjects() and $get('project.is_goal_tco2_edited_manually') or ! $this->project->hasChildrenProjects()))                                ->helperText($this->project->hasChildrenProjects() ? 'Somme actuelle des objectifs tCo2 des sous-projets : '.$this->project->childrenProjects->sum('tco2').' tcO2' : null)                                ->numeric(),                            TextInput::make('project.cost_duration_years')                                ->label('Durée de réduction des émissions')                                ->required()                                ->suffix('années')                                ->minValue(1)                                ->numeric(),                        ]),